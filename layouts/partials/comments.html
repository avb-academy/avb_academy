{{ $slug := .File.Path | urlize }}
{{ $slugKey := replace $slug "-" "_" }}
{{ $slugKey = replace $slugKey "." "_" }}

{{ $commentsFolder := index site.Data.comments $slugKey }}

{{ if $commentsFolder }}
  <div class="comments-container">
    <h2>Comments</h2>
    {{ range $filename, $comment := $commentsFolder }}
      <div class="comment">
        <strong>{{ $comment.name }}</strong>
        <small>{{ $comment.date | time.Format "Jan 2, 2006 at 15:04" }}</small>
        <p>{{ $comment.message }}</p>
      </div>
    {{ end }}
  </div>
{{ else }}
  <p>No comments yet.</p>
{{ end }}
