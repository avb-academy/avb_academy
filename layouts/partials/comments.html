{{/* Extract parts of the path */}}
{{ $parts := split .File.Path "/" }}
{{ if ge (len $parts) 2 }}
  {{ $key1 := replace (index $parts 0) "-" "_" }}
  {{ $key2 := replace (index $parts 1) "." "_" }}
  {{ $comments := index (index site.Data.comments $key1) $key2 }}

  {{ if $comments }}
    <div class="comments-container">
      <h2>Comments</h2>
      {{ range $filename, $comment := $comments }}
        <div class="comment">
          <strong>{{ $comment.name }}</strong><br>
          <small>{{ $comment.date }}</small>
          <p>{{ $comment.message }}</p>
        </div>
      {{ end }}
    </div>
  {{ else }}
    <p>No comments yet.</p>
  {{ end }}
{{ else }}
  <p>No comments yet.</p>
{{ end }}
